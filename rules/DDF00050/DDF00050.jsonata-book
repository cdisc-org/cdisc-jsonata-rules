[{"kind":1,"language":"markdown","value":"Import utility functions","outputs":[]},{"kind":2,"language":"jsonata","value":"$utils := $merge([$import(\"./utils/get_idmap.jsonata\")\r\n                 ,$import(\"./utils/get_maxids.jsonata\")\r\n                 ,$import(\"./utils/make_dup.jsonata\")\r\n                 ,$import(\"./utils/get_rule.jsonata\")\r\n                 ,$import(\"./utils/report.jsonata\")]) ","outputs":[{"mime":"text/x-json","value":{"get_idmap":{"_jsonata_lambda":true,"input":{},"environment":{"timestamp":"2025-06-04T11:03:25.333Z","async":false,"isParallelCall":false,"global":{"ancestry":[null]}},"arguments":[{"value":"obj","type":"variable","position":34},{"value":"mxids","type":"variable","position":41}],"body":{"type":"path","steps":[{"type":"function","value":"(","position":99,"arguments":[{"type":"path","steps":[{"type":"block","position":130,"expressions":[{"type":"path","steps":[{"value":"obj","type":"variable","position":134},{"value":"**","type":"descendant","position":137,"stages":[{"type":"filter","expr":{"type":"path","steps":[{"value":"id","type":"name","position":140}]},"position":138}]}]}]},{"type":"unary","value":"{","position":178,"lhs":[[{"value":"id","type":"string","position":220},{"type":"path","steps":[{"value":"id","type":"name","position":224}]}],[{"value":"instanceType","type":"string","position":278},{"type":"path","steps":[{"value":"instanceType","type":"name","position":292}]}]]}]},{"type":"lambda","arguments":[{"value":"idx","type":"variable","position":371},{"value":"v","type":"variable","position":374}],"position":367,"body":{"type":"block","position":449,"expressions":[{"type":"bind","value":":=","position":498,"lhs":{"value":"nxt","type":"variable","position":495},"rhs":{"type":"binary","value":"+","position":535,"lhs":{"type":"path","steps":[{"type":"function","value":"(","position":507,"arguments":[{"value":"idx","type":"variable","position":511},{"type":"path","steps":[{"value":"v","type":"variable","position":514},{"value":"instanceType","type":"name","position":527}]}],"procedure":{"value":"lookup","type":"variable","position":506}},{"value":"next","type":"name","position":533}]},"rhs":{"value":1,"type":"number","position":537}}},{"type":"bind","value":":=","position":587,"lhs":{"value":"idx","type":"variable","position":584},"rhs":{"type":"apply","value":"~>","position":595,"lhs":{"value":"idx","type":"variable","position":592},"rhs":{"type":"transform","position":597,"pattern":{"value":"","type":"variable","position":598},"update":{"type":"unary","value":"{","position":646,"lhs":[[{"type":"path","steps":[{"value":"v","type":"variable","position":698},{"value":"instanceType","type":"name","position":711}]},{"type":"unary","value":"{","position":768,"lhs":[[{"value":"max","type":"string","position":831},{"type":"path","steps":[{"type":"function","value":"(","position":841,"arguments":[{"value":"idx","type":"variable","position":845},{"type":"path","steps":[{"value":"v","type":"variable","position":848},{"value":"instanceType","type":"name","position":861}]}],"procedure":{"value":"lookup","type":"variable","position":840}},{"value":"max","type":"name","position":866}]}],[{"value":"next","type":"string","position":931},{"value":"nxt","type":"variable","position":937}],[{"value":"ids","type":"string","position":1001},{"type":"function","value":"(","position":1011,"arguments":[{"type":"path","steps":[{"type":"function","value":"(","position":1085,"arguments":[{"value":"idx","type":"variable","position":1089},{"type":"path","steps":[{"value":"v","type":"variable","position":1092},{"value":"instanceType","type":"name","position":1105}]}],"procedure":{"value":"lookup","type":"variable","position":1084}},{"value":"ids","type":"name","position":1110}]},{"type":"unary","value":"{","position":1179,"lhs":[[{"value":"old","type":"string","position":1254},{"type":"path","steps":[{"value":"v","type":"variable","position":1258},{"value":"id","type":"name","position":1261}]}],[{"value":"new","type":"string","position":1337},{"type":"function","value":"(","position":1345,"arguments":[{"type":"unary","value":"[","position":1346,"expressions":[{"type":"path","steps":[{"value":"v","type":"variable","position":1348},{"value":"instanceType","type":"name","position":1361}]},{"type":"function","value":"(","position":1370,"arguments":[{"value":"nxt","type":"variable","position":1374}],"procedure":{"value":"string","type":"variable","position":1369}}]},{"value":"_","type":"string","position":1380}],"procedure":{"value":"join","type":"variable","position":1344}}]]}],"procedure":{"value":"append","type":"variable","position":1010}}]]}]]}}}}]}},{"value":"mxids","type":"variable","position":1765}],"procedure":{"value":"reduce","type":"variable","position":98}},{"value":"**","type":"descendant","position":1795},{"value":"","type":"variable","position":1797}],"group":{"lhs":[[{"type":"path","steps":[{"value":"old","type":"name","position":1801}]},{"type":"path","steps":[{"value":"new","type":"name","position":1806}]}]],"position":1798}}},"get_maxids":{"_jsonata_lambda":true,"input":{},"environment":{"timestamp":"2025-06-04T11:03:25.332Z","async":false,"isParallelCall":false,"global":{"ancestry":[null]}},"arguments":[{"value":"wrapper","type":"variable","position":39}],"body":{"type":"path","steps":[{"value":"wrapper","type":"variable","position":97},{"type":"block","position":99,"expressions":[{"value":"**","type":"descendant","position":101,"predicate":[{"type":"filter","expr":{"type":"path","steps":[{"value":"id","type":"name","position":104}]},"position":102}]}]},{"value":"","type":"variable","position":108}],"group":{"lhs":[[{"type":"path","steps":[{"value":"instanceType","type":"name","position":185}]},{"type":"path","steps":[{"value":"","type":"variable","position":188},{"type":"unary","value":"[","position":190,"expressions":[{"value":"max","type":"string","position":195},{"value":"next","type":"string","position":202}],"focus":"k","tuple":true,"consarray":true}],"group":{"lhs":[[{"value":"k","type":"variable","position":289},{"type":"function","value":"(","position":296,"arguments":[{"type":"path","steps":[{"value":"","type":"variable","position":297},{"type":"function","value":"(","position":306,"arguments":[{"type":"function","value":"(","position":322,"arguments":[{"type":"function","value":"(","position":330,"arguments":[{"type":"path","steps":[{"value":"id","type":"name","position":332}]}],"procedure":{"value":"string","type":"variable","position":329}},{"value":"_","type":"string","position":337}],"procedure":{"value":"substringAfter","type":"variable","position":321}}],"procedure":{"value":"number","type":"variable","position":305}}]}],"procedure":{"value":"max","type":"variable","position":295}}]],"position":245}}]],"position":139}}},"make_dup":{"_jsonata_lambda":true,"input":{},"environment":{"timestamp":"2025-06-04T11:03:25.334Z","async":false,"isParallelCall":false,"global":{"ancestry":[null]}},"arguments":[{"value":"obj","type":"variable","position":33},{"value":"imap","type":"variable","position":39}],"body":{"type":"apply","value":"~>","position":96,"lhs":{"value":"obj","type":"variable","position":93},"rhs":{"type":"transform","position":98,"pattern":{"value":"**","type":"descendant","position":100,"predicate":[{"type":"filter","expr":{"type":"path","steps":[{"value":"id","type":"name","position":103}]},"position":101}]},"update":{"type":"block","position":106,"expressions":[{"type":"function","value":"(","position":159,"arguments":[{"type":"function","value":"(","position":215,"arguments":[{"type":"function","value":"(","position":275,"arguments":[{"type":"lambda","arguments":[{"value":"v","type":"variable","position":344},{"value":"k","type":"variable","position":347}],"position":342,"body":{"type":"binary","value":"and","position":505,"lhs":{"type":"function","value":"(","position":487,"arguments":[{"value":"k","type":"variable","position":489},{"value":{},"type":"regex","position":500}],"procedure":{"value":"contains","type":"variable","position":486}},"rhs":{"type":"binary","value":"!=","position":518,"lhs":{"type":"function","value":"(","position":512,"arguments":[{"value":"v","type":"variable","position":514}],"procedure":{"value":"type","type":"variable","position":511}},"rhs":{"value":"null","type":"string","position":525}}}}],"procedure":{"value":"sift","type":"variable","position":274}},{"type":"lambda","arguments":[{"value":"v","type":"variable","position":709},{"value":"k","type":"variable","position":712}],"position":707,"body":{"type":"block","position":835,"expressions":[{"type":"bind","value":":=","position":911,"lhs":{"value":"get_id","type":"variable","position":908},"rhs":{"type":"lambda","arguments":[{"value":"id","type":"variable","position":924}],"position":921,"body":{"type":"condition","position":949,"condition":{"type":"block","position":927,"expressions":[{"type":"binary","value":"in","position":933,"lhs":{"value":"id","type":"variable","position":930},"rhs":{"type":"function","value":"(","position":940,"arguments":[{"value":"imap","type":"variable","position":945}],"procedure":{"value":"keys","type":"variable","position":939}}}]},"then":{"type":"lambda","thunk":true,"arguments":[],"position":958,"body":{"type":"function","value":"(","position":958,"arguments":[{"value":"imap","type":"variable","position":963},{"value":"id","type":"variable","position":968}],"procedure":{"value":"lookup","type":"variable","position":957}}},"else":{"value":"id","type":"variable","position":975}}}},{"type":"unary","value":"{","position":1044,"lhs":[[{"value":"k","type":"variable","position":1182},{"type":"condition","position":1279,"condition":{"type":"function","value":"(","position":1194,"arguments":[{"value":"k","type":"variable","position":1196},{"value":{},"type":"regex","position":1203}],"procedure":{"value":"contains","type":"variable","position":1193}},"then":{"type":"function","value":"(","position":1285,"arguments":[{"value":"v","type":"variable","position":1287},{"value":"get_id","type":"variable","position":1295}],"procedure":{"value":"map","type":"variable","position":1284}},"else":{"type":"function","value":"(","position":1380,"arguments":[{"value":"v","type":"variable","position":1382}],"procedure":{"value":"get_id","type":"variable","position":1379}}}]]}]}}],"procedure":{"value":"each","type":"variable","position":214}}],"procedure":{"value":"merge","type":"variable","position":158}}]}}}},"get_rule":{"_jsonata_lambda":true,"input":{},"environment":{"timestamp":"2025-06-04T11:03:25.332Z","async":false,"isParallelCall":false,"global":{"ancestry":[null]}},"arguments":[{"value":"def","type":"variable","position":32}],"body":{"type":"unary","value":"{","position":83,"lhs":[[{"value":"message","type":"string","position":122},{"type":"path","steps":[{"value":"def","type":"variable","position":128},{"value":"rule","type":"name","position":133},{"value":"Outcome","type":"name","position":141},{"value":"Message","type":"name","position":149}]}],[{"value":"check_func","type":"string","position":192},{"type":"function","value":"(","position":200,"arguments":[{"type":"binary","value":"&","position":251,"lhs":{"type":"binary","value":"&","position":220,"lhs":{"value":"function($data){","type":"string","position":218},"rhs":{"type":"path","steps":[{"value":"def","type":"variable","position":225},{"value":"rule","type":"name","position":230},{"value":"Check","type":"name","position":236},{"value":"all","type":"name","position":240},{"value":"operator","type":"name","position":249}]}},"rhs":{"value":"}","type":"string","position":255}}],"procedure":{"value":"eval","type":"variable","position":199}}],[{"value":"variables","type":"string","position":298},{"type":"path","steps":[{"value":"def","type":"variable","position":304},{"value":"rule","type":"name","position":309},{"value":"Outcome","type":"name","position":317},{"value":"Output_Variables","type":"name","position":334}]}],[{"value":"scope","type":"string","position":372},{"type":"path","steps":[{"value":"def","type":"variable","position":378},{"value":"rule","type":"name","position":383},{"value":"Scope","type":"name","position":389},{"value":"Entities","type":"name","position":398}]}]]}},"report":{"_jsonata_lambda":true,"input":{},"environment":{"timestamp":"2025-06-04T11:03:25.335Z","async":false,"isParallelCall":false,"global":{"ancestry":[null]}},"arguments":[{"value":"rule","type":"variable","position":31},{"value":"data","type":"variable","position":37}],"body":{"type":"block","position":80,"expressions":[{"type":"bind","value":":=","position":116,"lhs":{"value":"errors","type":"variable","position":113},"rhs":{"type":"function","value":"(","position":125,"arguments":[{"value":"placeholder","type":"string","position":138},{"type":"path","steps":[{"value":"rule","type":"variable","position":144},{"type":"function","value":"(","position":156,"arguments":[{"value":"data","type":"variable","position":161}],"procedure":{"type":"path","steps":[{"value":"check_func","type":"name","position":155}]}}]}],"procedure":{"value":"append","type":"variable","position":124}}},{"type":"apply","value":"~>","position":535,"lhs":{"type":"path","steps":[{"value":"data","type":"variable","position":195},{"value":"**","type":"descendant","position":198},{"value":"instanceType","type":"name","position":211,"focus":"it","tuple":true},{"type":"block","position":217,"expressions":[{"value":"errors","type":"variable","position":224}]}],"group":{"lhs":[[{"value":"it","type":"variable","position":293},{"type":"unary","value":"{","position":334,"lhs":[[{"value":"executionStatus","type":"string","position":393},{"value":"success","type":"string","position":404}],[{"value":"class","type":"string","position":454},{"value":"it","type":"variable","position":459,"predicate":[{"type":"filter","expr":{"value":0,"type":"number","position":461},"position":460}]}]]}]],"position":256}},"rhs":{"type":"transform","position":537,"pattern":{"value":"*","type":"wildcard","position":538},"update":{"type":"block","position":578,"expressions":[{"type":"bind","value":":=","position":629,"lhs":{"value":"class","type":"variable","position":626},"rhs":{"type":"path","steps":[{"value":"","type":"variable","position":631},{"value":"class","type":"name","position":637}]}},{"type":"condition","position":758,"condition":{"type":"binary","value":"in","position":689,"lhs":{"value":"class","type":"variable","position":686},"rhs":{"type":"path","steps":[{"value":"errors","type":"variable","position":697},{"value":"instanceType","type":"name","position":710}]}},"then":{"type":"unary","value":"{","position":810,"lhs":[[{"value":"message","type":"string","position":873},{"type":"path","steps":[{"value":"rule","type":"variable","position":880},{"value":"message","type":"name","position":888}]}],[{"value":"errors","type":"string","position":951},{"type":"function","value":"(","position":959,"arguments":[{"value":"errors","type":"variable","position":966,"predicate":[{"type":"filter","expr":{"type":"binary","value":"=","position":981,"lhs":{"type":"path","steps":[{"value":"instanceType","type":"name","position":979}]},"rhs":{"value":"class","type":"variable","position":988}},"position":967}]},{"type":"lambda","arguments":[{"value":"obj","type":"variable","position":1003}],"position":999,"body":{"type":"lambda","thunk":true,"arguments":[],"position":1011,"body":{"type":"function","value":"(","position":1011,"arguments":[{"value":"obj","type":"variable","position":1015},{"type":"lambda","arguments":[{"value":"v","type":"variable","position":1027},{"value":"k","type":"variable","position":1030}],"position":1025,"body":{"type":"binary","value":"in","position":1037,"lhs":{"value":"k","type":"variable","position":1034},"rhs":{"type":"path","steps":[{"value":"rule","type":"variable","position":1043},{"value":"variables","type":"name","position":1053}]}}}],"procedure":{"value":"sift","type":"variable","position":1010}}}}],"procedure":{"value":"map","type":"variable","position":958}}]]},"else":{"type":"unary","value":"{","position":1157,"lhs":[]}}]}}}]}}}}]},{"kind":1,"language":"markdown","value":"Define test","outputs":[]},{"kind":2,"language":"jsonata","value":"$rule := $utils.get_rule($import(\"./rules/DDF00050/DDF00050.json\"))","outputs":[{"mime":"text/x-json","value":{"message":"The id value referenced in the populationIds attribute of the study arm does not correspond with a study population or cohort that is defined with the same study design as the study arm.","check_func":{"_jsonata_lambda":true,"input":{},"environment":{"timestamp":"2025-06-04T10:50:50.837Z","async":false,"isParallelCall":true,"global":{"ancestry":[null]}},"arguments":[{"value":"data","type":"variable","position":14}],"body":{"type":"path","steps":[{"type":"block","position":17,"expressions":[{"type":"path","steps":[{"value":"data","type":"variable","position":22},{"value":"**","type":"descendant","position":25},{"value":"studyDesigns","type":"name","position":38}]}],"focus":"s","tuple":true},{"type":"unary","value":"[","position":65,"expressions":[{"type":"path","steps":[{"value":"s","type":"variable","position":92},{"value":"arms","type":"name","position":97},{"value":"populationIds","type":"name","position":111,"stages":[{"type":"filter","expr":{"type":"binary","value":"and","position":137,"lhs":{"type":"binary","value":"!=","position":116,"lhs":{"value":"","type":"variable","position":113},"rhs":{"type":"path","steps":[{"value":"s","type":"variable","position":119},{"value":"population","type":"name","position":130},{"value":"id","type":"name","position":133}]}},"rhs":{"type":"function","value":"(","position":143,"arguments":[{"type":"binary","value":"in","position":147,"lhs":{"value":"","type":"variable","position":144},"rhs":{"type":"path","steps":[{"value":"s","type":"variable","position":150},{"value":"population","type":"name","position":161},{"value":"cohorts","type":"name","position":169},{"value":"id","type":"name","position":172}]}}],"procedure":{"value":"not","type":"variable","position":142}}},"position":112}],"ancestor":{"label":"!0","level":0,"index":2},"tuple":true},{"type":"unary","value":"{","position":201,"seekingParent":[{"label":"!0","level":0,"index":0},{"label":"!0","level":0,"index":1},{"label":"!0","level":0,"index":2}],"lhs":[[{"value":"parent_id","type":"string","position":237},{"type":"path","steps":[{"value":"s","type":"variable","position":241},{"value":"id","type":"name","position":244}]}],[{"value":"parent_entity","type":"string","position":285},{"type":"path","steps":[{"value":"s","type":"variable","position":289},{"value":"instanceType","type":"name","position":302}]}],[{"value":"id","type":"string","position":332},{"type":"path","steps":[{"type":"parent","slot":{"label":"!0","level":0,"index":0}},{"value":"id","type":"name","position":338}],"seekingParent":[{"label":"!0","level":0,"index":0},{"label":"!0","level":0,"index":1},{"label":"!0","level":0,"index":2}]}],[{"value":"name","type":"string","position":370},{"type":"path","steps":[{"type":"parent","slot":{"label":"!0","level":0,"index":1}},{"value":"name","type":"name","position":378}],"seekingParent":[{"label":"!0","level":0,"index":1}]}],[{"value":"populationId","type":"string","position":418},{"value":"","type":"variable","position":421}],[{"value":"instanceType","type":"string","position":461},{"type":"path","steps":[{"type":"parent","slot":{"label":"!0","level":0,"index":2}},{"value":"instanceType","type":"name","position":477}],"seekingParent":[{"label":"!0","level":0,"index":2}]}]]}]}],"consarray":true}]}},"variables":["parent_entity","parent_id","parent_rel","id","name","parent_id.StudyArm","population.id","$parent_of_cohort"],"scope":{"Include":["StudyArm"]}}}]},{"kind":1,"language":"markdown","value":"Create test data","outputs":[]},{"kind":2,"language":"jsonata","value":"(\r\n    /***********************************************************************\\\r\n    * Use the CDISC Pilot data as a start point                             *\r\n    \\***********************************************************************/\r\n\r\n    $old_study := $loadFile(\"./testdata/CDISC_Pilot_Study.json\");\r\n\r\n    /***********************************************************************\\\r\n    * Create and insert a second study design as a copy of the first        *\r\n    \\***********************************************************************/\r\n    $maxids := $utils.get_maxids($old_study);\r\n    $idmap := $utils.get_idmap($old_study.**.studyDesigns[0],$maxids);\r\n    $new_sd := $utils.make_dup($old_study.**.studyDesigns[0],$idmap);\r\n    $new_study1 := $old_study ~> |study.versions[0]|{\"studyDesigns\": $append(studyDesigns,$new_sd)}|;\r\n\r\n    /***********************************************************************\\\r\n    * Create a copy of the first study design's population and insert it as *\r\n    * the first cohort for the (new) second study design.                   *\r\n    \\***********************************************************************/\r\n    $maxids := $utils.get_maxids($new_study1);\r\n    $idmap := $utils.get_idmap($new_study1.**.studyDesigns[0].population,$maxids);\r\n    $new_cohort1 := $utils.make_dup($new_study1.**.studyDesigns[0].population,$idmap) ~> |$|\r\n        {\r\n            \"id\": \"StudyCohort_1\",\r\n            \"name\": \"COHORT1\",\r\n            \"instanceType\": \"StudyCohort\"\r\n        },[\"plannedSex\",\"plannedEnrollmentNumber\",\"plannedCompletionNumber\",\"criterionIds\",\"cohorts\"]| ~> |plannedAge.maxValue|{\"value\": 75}|;\r\n    $new_study2 := $new_study1 ~> |study.versions[0].studyDesigns[1].population|{\"cohorts\": $append(cohorts,$new_cohort1)}|;\r\n\r\n    /***********************************************************************\\\r\n    * Duplicate the cohort created in the previous step to create the       *\r\n    * second cohort for the (new) second study design.                      *\r\n    \\***********************************************************************/\r\n    $maxids := $utils.get_maxids($new_study2);\r\n    $idmap := $utils.get_idmap($new_study2.**.studyDesigns[1].population.cohorts[0],$maxids);\r\n    $new_cohort2 := $utils.make_dup($new_study2.**.studyDesigns[1].population.cohorts[0],$idmap) ~> |$|\r\n        {\r\n            \"name\": \"COHORT2\"\r\n        }| ~> |plannedAge.minValue|{\"value\": 76}| ~> |plannedAge.maxValue|{\"value\": 100}|;\r\n    $new_study3 := $new_study2 \r\n                    ~> |study.versions[0].studyDesigns[1].population|{\"cohorts\": $append(cohorts,$new_cohort2)},[\"plannedAge\"]|;\r\n                    \r\n    /***********************************************************************\\\r\n    * Add incorrect population references to the arms in the first and      *\r\n    * second study designs and write out as negative unit test data.        *\r\n    \\***********************************************************************/\r\n    $pop1_id := [$new_study3.study.versions[0].studyDesigns[0].population.id];\r\n    $cohort_ids := $new_study3.study.versions[0].studyDesigns[1].population.cohorts.id;\r\n    $new_study4 := $new_study3 ~> |study.versions[0].studyDesigns[0].arms[id]|{\"populationIds\": $pop1_id}|\r\n                               ~> |study.versions[0].studyDesigns[1].arms[[1,2]]|{\"populationIds\": $cohort_ids}|;\r\n    $writeFile(\"./rules/DDF00050/DDF00050-positive.json\",$new_study4);\r\n    \r\n    /***********************************************************************\\\r\n    * Add correct population references to the arms in the first and second *\r\n    * study designs and write out as positive unit test data.               *\r\n    \\***********************************************************************/\r\n    $pop2_id := [$new_study3.study.versions[0].studyDesigns[1].population.id];\r\n    $new_study5 := $new_study3 ~> |study.versions[0].studyDesigns[0].arms[0]|{\"populationIds\": $pop2_id}|\r\n                               ~> |study.versions[0].studyDesigns[0].arms[1]|{\"populationIds\": [$pop1_id,$cohort_ids[0]]}|\r\n                               ~> |study.versions[0].studyDesigns[0].arms[2]|{\"populationIds\": $append($cohort_ids,[\"StudyCohort_xx\"])}|\r\n                               ~> |study.versions[0].studyDesigns[1].arms[0]|{\"populationIds\": [$pop1_id,$cohort_ids]}|;\r\n    $writeFile(\"./rules/DDF00050/DDF00050-negative.json\",$new_study5);\r\n)","outputs":[{"mime":"text/x-json","value":"undefined"}]},{"kind":1,"language":"markdown","value":"Test positive data","outputs":[]},{"kind":2,"language":"jsonata","value":"(\r\n    $pos_data := $loadFile(\"./rules/DDF00050/DDF00050-positive.json\");\r\n    $utils.report($rule,$pos_data);\r\n)","outputs":[{"mime":"text/x-json","value":{"Study":{"executionStatus":"success","class":"Study"},"StudyVersion":{"executionStatus":"success","class":"StudyVersion"},"GovernanceDate":{"executionStatus":"success","class":"GovernanceDate"},"Code":{"executionStatus":"success","class":"Code"},"GeographicScope":{"executionStatus":"success","class":"GeographicScope"},"StudyAmendment":{"executionStatus":"success","class":"StudyAmendment"},"StudyAmendmentReason":{"executionStatus":"success","class":"StudyAmendmentReason"},"StudyChange":{"executionStatus":"success","class":"StudyChange"},"DocumentContentReference":{"executionStatus":"success","class":"DocumentContentReference"},"StudyAmendmentImpact":{"executionStatus":"success","class":"StudyAmendmentImpact"},"SubjectEnrollment":{"executionStatus":"success","class":"SubjectEnrollment"},"Quantity":{"executionStatus":"success","class":"Quantity"},"AliasCode":{"executionStatus":"success","class":"AliasCode"},"StudyIdentifier":{"executionStatus":"success","class":"StudyIdentifier"},"ReferenceIdentifier":{"executionStatus":"success","class":"ReferenceIdentifier"},"InterventionalStudyDesign":{"executionStatus":"success","class":"InterventionalStudyDesign"},"Encounter":{"executionStatus":"success","class":"Encounter"},"TransitionRule":{"executionStatus":"success","class":"TransitionRule"},"Activity":{"executionStatus":"success","class":"Activity"},"Procedure":{"executionStatus":"success","class":"Procedure"},"StudyArm":{"executionStatus":"success","class":"StudyArm"},"StudyCell":{"executionStatus":"success","class":"StudyCell"},"StudyEpoch":{"executionStatus":"success","class":"StudyEpoch"},"StudyElement":{"executionStatus":"success","class":"StudyElement"},"Estimand":{"executionStatus":"success","class":"Estimand"},"IntercurrentEvent":{"executionStatus":"success","class":"IntercurrentEvent"},"Indication":{"executionStatus":"success","class":"Indication"},"Objective":{"executionStatus":"success","class":"Objective"},"Endpoint":{"executionStatus":"success","class":"Endpoint"},"StudyDesignPopulation":{"executionStatus":"success","class":"StudyDesignPopulation"},"Range":{"executionStatus":"success","class":"Range"},"ScheduleTimeline":{"executionStatus":"success","class":"ScheduleTimeline"},"ScheduleTimelineExit":{"executionStatus":"success","class":"ScheduleTimelineExit"},"Timing":{"executionStatus":"success","class":"Timing"},"ScheduledActivityInstance":{"executionStatus":"success","class":"ScheduledActivityInstance"},"EligibilityCriterion":{"executionStatus":"success","class":"EligibilityCriterion"},"AnalysisPopulation":{"executionStatus":"success","class":"AnalysisPopulation"},"StudyCohort":{"executionStatus":"success","class":"StudyCohort"},"StudyTitle":{"executionStatus":"success","class":"StudyTitle"},"EligibilityCriterionItem":{"executionStatus":"success","class":"EligibilityCriterionItem"},"NarrativeContentItem":{"executionStatus":"success","class":"NarrativeContentItem"},"StudyRole":{"executionStatus":"success","class":"StudyRole"},"Masking":{"executionStatus":"success","class":"Masking"},"Organization":{"executionStatus":"success","class":"Organization"},"Address":{"executionStatus":"success","class":"Address"},"StudySite":{"executionStatus":"success","class":"StudySite"},"StudyIntervention":{"executionStatus":"success","class":"StudyIntervention"},"Administration":{"executionStatus":"success","class":"Administration"},"Duration":{"executionStatus":"success","class":"Duration"},"BiomedicalConcept":{"executionStatus":"success","class":"BiomedicalConcept"},"BiomedicalConceptProperty":{"executionStatus":"success","class":"BiomedicalConceptProperty"},"ResponseCode":{"executionStatus":"success","class":"ResponseCode"},"BiomedicalConceptSurrogate":{"executionStatus":"success","class":"BiomedicalConceptSurrogate"},"SyntaxTemplateDictionary":{"executionStatus":"success","class":"SyntaxTemplateDictionary"},"ParameterMap":{"executionStatus":"success","class":"ParameterMap"},"Condition":{"executionStatus":"success","class":"Condition"},"StudyDefinitionDocument":{"executionStatus":"success","class":"StudyDefinitionDocument"},"StudyDefinitionDocumentVersion":{"executionStatus":"success","class":"StudyDefinitionDocumentVersion"},"NarrativeContent":{"executionStatus":"success","class":"NarrativeContent"}}}]},{"kind":1,"language":"markdown","value":"Test negative data","outputs":[]},{"kind":2,"language":"jsonata","value":"(\r\n    $neg_data := $loadFile(\"./rules/DDF00050/DDF00050-negative.json\");\r\n    $utils.report($rule,$neg_data)\r\n\r\n)","outputs":[{"mime":"text/x-json","value":{"Study":{"executionStatus":"success","class":"Study"},"StudyVersion":{"executionStatus":"success","class":"StudyVersion"},"GovernanceDate":{"executionStatus":"success","class":"GovernanceDate"},"Code":{"executionStatus":"success","class":"Code"},"GeographicScope":{"executionStatus":"success","class":"GeographicScope"},"StudyAmendment":{"executionStatus":"success","class":"StudyAmendment"},"StudyAmendmentReason":{"executionStatus":"success","class":"StudyAmendmentReason"},"StudyChange":{"executionStatus":"success","class":"StudyChange"},"DocumentContentReference":{"executionStatus":"success","class":"DocumentContentReference"},"StudyAmendmentImpact":{"executionStatus":"success","class":"StudyAmendmentImpact"},"SubjectEnrollment":{"executionStatus":"success","class":"SubjectEnrollment"},"Quantity":{"executionStatus":"success","class":"Quantity"},"AliasCode":{"executionStatus":"success","class":"AliasCode"},"StudyIdentifier":{"executionStatus":"success","class":"StudyIdentifier"},"ReferenceIdentifier":{"executionStatus":"success","class":"ReferenceIdentifier"},"InterventionalStudyDesign":{"executionStatus":"success","class":"InterventionalStudyDesign"},"Encounter":{"executionStatus":"success","class":"Encounter"},"TransitionRule":{"executionStatus":"success","class":"TransitionRule"},"Activity":{"executionStatus":"success","class":"Activity"},"Procedure":{"executionStatus":"success","class":"Procedure"},"StudyArm":{"executionStatus":"success","class":"StudyArm","message":"The id value referenced in the populationIds attribute of the study arm does not correspond with a study population or cohort that is defined with the same study design as the study arm.","errors":[{"parent_id":"InterventionalStudyDesign_1","parent_entity":"InterventionalStudyDesign","id":"StudyArm_1","name":"Placebo"},{"parent_id":"InterventionalStudyDesign_1","parent_entity":"InterventionalStudyDesign","id":"StudyArm_2","name":"Xanomeline Low Dose"},{"parent_id":"InterventionalStudyDesign_1","parent_entity":"InterventionalStudyDesign","id":"StudyArm_3","name":"Xanomeline High Dose"},{"parent_id":"InterventionalStudyDesign_1","parent_entity":"InterventionalStudyDesign","id":"StudyArm_3","name":"Xanomeline High Dose"},{"parent_id":"InterventionalStudyDesign_1","parent_entity":"InterventionalStudyDesign","id":"StudyArm_3","name":"Xanomeline High Dose"},{"parent_id":"InterventionalStudyDesign_2","parent_entity":"InterventionalStudyDesign","id":"StudyArm_4","name":"Placebo"}]},"StudyCell":{"executionStatus":"success","class":"StudyCell"},"StudyEpoch":{"executionStatus":"success","class":"StudyEpoch"},"StudyElement":{"executionStatus":"success","class":"StudyElement"},"Estimand":{"executionStatus":"success","class":"Estimand"},"IntercurrentEvent":{"executionStatus":"success","class":"IntercurrentEvent"},"Indication":{"executionStatus":"success","class":"Indication"},"Objective":{"executionStatus":"success","class":"Objective"},"Endpoint":{"executionStatus":"success","class":"Endpoint"},"StudyDesignPopulation":{"executionStatus":"success","class":"StudyDesignPopulation"},"Range":{"executionStatus":"success","class":"Range"},"ScheduleTimeline":{"executionStatus":"success","class":"ScheduleTimeline"},"ScheduleTimelineExit":{"executionStatus":"success","class":"ScheduleTimelineExit"},"Timing":{"executionStatus":"success","class":"Timing"},"ScheduledActivityInstance":{"executionStatus":"success","class":"ScheduledActivityInstance"},"EligibilityCriterion":{"executionStatus":"success","class":"EligibilityCriterion"},"AnalysisPopulation":{"executionStatus":"success","class":"AnalysisPopulation"},"StudyCohort":{"executionStatus":"success","class":"StudyCohort"},"StudyTitle":{"executionStatus":"success","class":"StudyTitle"},"EligibilityCriterionItem":{"executionStatus":"success","class":"EligibilityCriterionItem"},"NarrativeContentItem":{"executionStatus":"success","class":"NarrativeContentItem"},"StudyRole":{"executionStatus":"success","class":"StudyRole"},"Masking":{"executionStatus":"success","class":"Masking"},"Organization":{"executionStatus":"success","class":"Organization"},"Address":{"executionStatus":"success","class":"Address"},"StudySite":{"executionStatus":"success","class":"StudySite"},"StudyIntervention":{"executionStatus":"success","class":"StudyIntervention"},"Administration":{"executionStatus":"success","class":"Administration"},"Duration":{"executionStatus":"success","class":"Duration"},"BiomedicalConcept":{"executionStatus":"success","class":"BiomedicalConcept"},"BiomedicalConceptProperty":{"executionStatus":"success","class":"BiomedicalConceptProperty"},"ResponseCode":{"executionStatus":"success","class":"ResponseCode"},"BiomedicalConceptSurrogate":{"executionStatus":"success","class":"BiomedicalConceptSurrogate"},"SyntaxTemplateDictionary":{"executionStatus":"success","class":"SyntaxTemplateDictionary"},"ParameterMap":{"executionStatus":"success","class":"ParameterMap"},"Condition":{"executionStatus":"success","class":"Condition"},"StudyDefinitionDocument":{"executionStatus":"success","class":"StudyDefinitionDocument"},"StudyDefinitionDocumentVersion":{"executionStatus":"success","class":"StudyDefinitionDocumentVersion"},"NarrativeContent":{"executionStatus":"success","class":"NarrativeContent"}}}]},{"kind":1,"language":"markdown","value":"","outputs":[]}]