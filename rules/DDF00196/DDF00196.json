{
    "rule": {
        "Authorities": [
            {
                "Organization": "CDISC",
                "Standards": [
                    {
                        "Name": "USDM",
                        "References": [
                            {
                                "Citations": [
                                    {
                                        "Document": "USDM_CORE_Rules.xlsx",
                                        "Cited_Guidance": "There must be a one-to-one relationship between referenced section number and title within any study definition document affected by a study amendment."
                                    }
                                ],
                                "Origin": "USDM Conformance Rules",
                                "Version": "1.0",
                                "Rule_Identifier": {
                                    "Id": "DDF00196",
                                    "Version": "1"
                                }
                            }
                        ],
                        "Version": "4.0"
                    }
                ]
            }
        ],
        "Check": "study@$s.\n  $s.versions@$sv.\n    $sv.amendments@$a.\n      $a.changes@$sc.\n        $sc.changedSections.\n          (\n            $this:=$;\n            $t4n:=$distinct($a.changes.changedSections[sectionNumber = $this.sectionNumber and appliesToId = $this.appliesToId].sectionTitle)~>$sort;\n            $n4t:=$distinct($a.changes.changedSections[sectionTitle = $this.sectionTitle and appliesToId = $this.appliesToId].sectionNumber)~>$sort;\n            {\n              \"instanceType\": instanceType,\n              \"id\": id,\n              \"path\": _path,\n              \"StudyAmendment.id\": $a.id,\n              \"StudyAmendment.name\": $a.name,\n              \"StudyChange.id\": $sc.id,\n              \"StudyChange.name\": $sc.name,\n              \"appliesToId\": appliesToId &\": \"&\n                (\n                  appliesToId in $s.documentedBy.id\n                  ? $s.documentedBy[id=$this.appliesToId].name\n                  : \"Invalid appliesToId\"\n                ),\n              \"sectionNumber\": sectionNumber,\n              \"n4t\": \"[\"&$join($n4t,\"; \")&\"]\",\n              \"sectionTitle\": sectionTitle,\n              \"t4n\": \"[\"&$join($t4n,\"; \")&\"]\",\n              \"check\": ($count($t4n)!=1 or $count($n4t)!=1)\n            }\n          )[check=true] ~>\n          $sort(function($l,$r)\n            {\n                $l.`StudyAmendment.id` >= $r.`StudyAmendment.id` and\n                $l.appliesToId >= $r.appliesToId and\n                $l.n4t >= $r.n4t and\n                $l.t4n > $r.t4n\n            }\n          )",
        "Core": {
            "Id": "",
            "Status": "Draft",
            "Version": "1"
        },
        "Description": "There must be a one-to-one relationship between referenced section number and title within any study definition document affected by a study amendment.",
        "Executability": "Fully Executable",
        "Outcome": {
            "Message": "There is not a one-to-one relationship between the referenced section number and title within the study definition document affected by the study amendment.",
            "Output_Variables": [
                "StudyAmendment.id",
                "StudyAmendment.name",
                "StudyChange.id",
                "StudyChange.name",
                "appliesToId",
                "sectionNumber",
                "sectionTitle"
            ]
        },
        "Scope": {
            "Entities": {
                "Include": [
                    "DocumentContentReference"
                ]
            }
        },
        "Sensitivity": "Record",
        "Rule_Type": "JSONata"
    },
    "datasets": [],
    "codelists": []
}