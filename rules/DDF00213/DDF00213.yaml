Authorities:
  - Organization: CDISC
    Standards:
      - Name: USDM
        References:
          - Citations:
              - Cited Guidance: 'If the intervention model indicates a single group design then
                  only one intervention is expected. In all other cases more
                  interventions are expected.'
                Document: 'USDM_CORE_Rules.xlsx'
            Origin: 'USDM Conformance Rules'
            Rule Identifier:
              Id: 'DDF00213'
              Version: '1'
            Version: '1.0'
        Version: '4.0'
Check: |-
  ($.study.versions)@$sv.
      ($sv.studyDesigns[studyType.code = "C98388"])@$sd.
              {
                  "id": $sd.id,
                  "name": $sd.name,
                  "studyType.code": $sd.studyType.code,
                  "studyType.decode": $sd.studyType.decode,
                  "model.code": $sd.model.code,
                  "model.decode": $sd.model.decode,
                  "# Referenced Study Interventions":  $count($distinct($sd.studyInterventionIds[$ in $sv.studyInterventions.id])),
                  "dataset": $sd.instanceType
              }
              [
                  (`model.code` = "C82640" and `# Referenced Study Interventions` != 1) or
                  (`model.code` != "C82640" and `# Referenced Study Interventions` <= 1)
              ]
Core:
  Id: DDF00213'
  Status: Draft
  Version: '1'
Description: 'If the intervention model indicates a single group design then
  only one intervention is expected. In all other cases more interventions are
  expected.'
Executability: Partially Executable - Possible Overreporting
Outcome:
  Message: 'The number of study interventions referenced for the interventional
    study design is not consistent with intervention model specified for the
    study design - either the model indicates a single group and there is not
    reference to only one study intervention, or the model does not indicate a
    single group and there are not references to multiple study interventions.'
  Output Variables:
    - id
    - name
    - studyType.code
    - studyType.decode
    - model.code
    - model.decode
    - '# Referenced Study Interventions'
Rule Type: JSONata
Scope:
  Entities:
    Include:
      - 'InterventionalStudyDesign'
Sensitivity: Record
