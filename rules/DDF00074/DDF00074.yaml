Authorities:
  - Organization: CDISC
    Standards:
      - Name: USDM
        References:
          - Citations:
              - Cited Guidance: 'If the intervention model indicates a single group design then
                  only one intervention is expected. In all other cases more
                  interventions are expected.'
                Document: 'USDM_CORE_Rules.xlsx'
            Origin: 'USDM Conformance Rules'
            Rule Identifier:
              Id: 'DDF00074'
              Version: '1'
            Version: '1.0'
        Version: '3.0'
Check: |-
  ($.study.versions)@$sv.
      ($sv.studyDesigns)@$sd.
              {
                  "id": $sd.id,
                  "name": $sd.name,
                  "interventionModel.code": $sd.interventionModel.code,
                  "interventionModel.decode": $sd.interventionModel.decode,
                  "# Study Interventions":  $count($sd.studyInterventions),
                  "dataset": $sd.instanceType
              }
              [
                  (`interventionModel.code` = "C82640" and `# Study Interventions` != 1) or
                  (`interventionModel.code` != "C82640" and `# Study Interventions` <= 1)
              ]
Core:
  Id: 'DDF00074'
  Status: Draft
  Version: '1'
Description: 'If the intervention model indicates a single group design then
  only one intervention is expected. In all other cases more interventions are
  expected.'
Executability: Partially Executable - Possible Overreporting
Outcome:
  Message: 'The number of study interventions defined for the study design is not
    consistent with intervention model specified for the study design - either
    the model indicates a single group and there is not only one study
    intervention, or the model does not indicate a single group and there are
    not multiple study interventions.'
  Output Variables:
    - id
    - name
    - interventionModel.code
    - interventionModel.decode
    - '# Study Interventions'
Rule Type: JSONata
Scope:
  Entities:
    Include:
      - 'StudyDesign'
Sensitivity: Record
