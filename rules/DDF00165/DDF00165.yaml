Authorities:
  - Organization: CDISC
    Standards:
      - Name: USDM
        References:
          - Citations:
              - Cited Guidance: 'If a section title is to be displayed then a title must be
                  specified.'
                Document: 'USDM_CORE_Rules.xlsx'
            Origin: 'USDM Conformance Rules'
            Rule Identifier:
              Id: 'DDF00165'
              Version: '1'
            Version: '1.0'
        Version: '4.0'
Check: |-
  ($.**.documentedBy)@$db.
    $db.versions@$sv.
    $sv.contents@$nc.
    $nc.
      [
        (
          $NoSect:=function(){$type($nc.sectionTitle)="null" or sectionTitle="" or $exists(sectionTitle)=false} ;
          $ChkX:=function()
            {
              ($NoSect()=true and displaySectionTitle=true)
            };
            {
              "instanceType": $nc.instanceType,
              "id": $nc.id,
              "path": $nc._path,
              "StudyDefinitionDocument.id": $db.id,
              "StudyDefinitionDocument.name": $db.name,
              "StudyDefinitionDocumentVersion.id": $sv.id,
              "StudyDefinitionDocumentVersion.version": $sv.version,
              "name": $nc.name,
              "displaySectionTitle": $nc.displaySectionTitle,
              "sectionTitle": $nc.sectionTitle,
              "check": $ChkX()
            }
        )
      ]
      [check=true]
Core:
  Id: 'DDF00165'
  Status: Draft
  Version: '1'
Description: 'If a section title is to be displayed then a title must be specified.'
Executability: Fully Executable
Outcome:
  Message: 'A section title is indicated to be displayed
    (displaySectionTitle=true) but not specified.'
  Output Variables:
    - StudyDefinitionDocument.id
    - StudyDefinitionDocument.name
    - StudyDefinitionDocumentVersion.id
    - StudyDefinitionDocumentVersion.version
    - name
    - displaySectionTitle
    - sectionTitle
Rule Type: JSONata
Scope:
  Entities:
    Include:
      - 'NarrativeContent'
Sensitivity: Record
